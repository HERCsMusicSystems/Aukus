<!DOCTYPE html><meta charset="UTF-8"/>

<!--
///////////////////////////////////////////////////////////////////////////////////
//                     Copyright (C) 2023 Dr Robert P. Wolf                      //
//                                                                               //
// Permission is hereby granted, free of charge, to any person obtaining a copy  //
// of this software and associated documentation files (the "Software"), to deal //
// in the Software without restriction, including without limitation the rights  //
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell     //
// copies of the Software, and to permit persons to whom the Software is         //
// furnished to do so, subject to the following conditions:                      //
//                                                                               //
// The above copyright notice and this permission notice shall be included in    //
// all copies or substantial portions of the Software.                           //
//                                                                               //
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR    //
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,      //
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE   //
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER        //
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, //
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN     //
// THE SOFTWARE.                                                                 //
///////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////
// Program started on 3rd April 2023 //
///////////////////////////////////////

-->

<html>

<head>
	<title>Aukus Submarine Simulator</title>
	<link rel="shortcut icon" type="image/x-icon" href="h.ico"/>
	<style>
	a:link {color: blue; text-shadow: 1px 1px red;}
	a:visited {color: blue;}
	a:hover {color: red; text-shadow: 1px 1px blue;}
	a:active {color: red;}
	</style>
</head>

<body bgcolor="#0000aa" style="font-family: arial; color: gold; text-shadow: 1px 1px red; background-size: cover; background-repeat: no-repeat no-repeat; min-height: 100vh; overflow: hidden;">

<h1>AUKUS Submarine Simulator</h1>


<script src="background_ctrl.js"></script>
<script src="audio_ctrl.js"></script>
<script src="settings.js"></script>

Side: <select id="side_selector" onchange="localStorage . setItem ('side', side = this . value); ReadCommanders ();" autocomplete="off"></select>

&nbsp;&nbsp;&nbsp;&nbsp;Music On: <input type="checkbox" id="music_on" autocomplete="off" onchange="localStorage . setItem ('music_on', music_on = this . checked); if (music_on) PlayAudio ('Beowulf'); else PauseAudio ('Beowulf');"/>

&nbsp;&nbsp;&nbsp;&nbsp;Effects On: <input type="checkbox" id="effects_on" autocomplete="off" onchange="localStorage . setItem ('effects_on', effects_on = this . checked);"/>

<button onclick="if (confirm ('Are you sure?')) {localStorage . clear (); location . reload ();}" style="position: absolute; right: 10px;">Reset System ?</button>

&nbsp;&nbsp;&nbsp;&nbsp;<button onclick="if (name = prompt ('Commanding Officer\'s Name')) CreateCommandingOfficer (name);">Create Commanding Officer</button>

<table id="Commanders" style="background-color: #00ff8866;">
</table>

<h2>Scenarios:</h2>
<a href='brief.html?{"scenario": "Easy Detection"}'>Easy Detection</a><br/>
<a href='brief.html?{"scenario": "Easy Convoy"}'>Easy Convoy</a>



<script>
for (var country of sides) document . getElementById ('side_selector') . options . add (new Option (country, country, false, country === side));
document . getElementById ('music_on') . checked = music_on;
if (music_on) PlayAudio ('Beowulf'); else PauseAudio ('Beowulf');
document . getElementById ('effects_on') . checked = effects_on;

var CreateCommandingOfficer = function (name) {
	commanders [side] . commanders [name] = {rank: ranks [side] [0], rank_id: 0, score: 0, victory: 0, abort: 0, defeat: 0, scenarios: [], orders: [], status: 'Active'};
	commanders [side] . commander = name;
	localStorage . setItem (side, JSON . stringify (commanders [side]));
	ReadCommanders ();
};

var DeleteCommandingOfficer = function (name) {
	if (! confirm (`Delete ${commanders [side] . commanders [name] . rank} ${name} Commanding Officer?`)) return;
	delete commanders [side] . commanders [name];
	var cmds = Object . keys (commanders [side] . commanders);
	if (commanders [side] . commander === name) commanders [side] . commander = cmds . length > 0 ? cmds [0] : null;
	localStorage . setItem (side, JSON . stringify (commanders [side]));
	ReadCommanders ();
};

var SelectCommandingOfficer = function (name) {
	commanders [side] . commander = name;
	localStorage . setItem (side, JSON . stringify (commanders [side]));
};

var ReadCommanders = function () {
	var content = '<tr><td></td><td align="center">Rank</td><td>Name</td><td>Ribbons</td><td>Score</td><td>Victories</td><td>Aborts</td><td>Defeats</td><td>Status</td></tr>';
	for (var captain in commanders [side] . commanders) {
		var cp = commanders [side] . commanders [captain];
		var orders = '';
		var ol = cp . orders . length;
		for (var ord = 0; ord < ol; ord += 1) {
			orders += `<img src="orders/${side}/${cp . orders [ord]}-ribbon.png" width="80" title="${cp . orders [ord]}"/>`;
			if ((ol - ord) % 3 === 1) orders += '<br/>';
			if (ord === 0 && ol % 3 === 0) orders += '<br/>';
		}
		content += `<tr><td><input type="radio" name="commanders" ${commanders [side] . commander === captain ? 'checked' : ''} onclick="SelectCommandingOfficer ('${captain}');"/></td><td>${cp . rank}</td><td>${captain}</td><td>${orders}</td><td align="center">${cp . score}</td><td align="center">${cp . victory}</td><td align="center">${cp . abort}</td><td align="center">${cp . defeat}</td><td align="center">${cp . status}</td><td><button onclick="DeleteCommandingOfficer ('${captain}');">Delete</button></td></tr>`;
	}
	document . getElementById ('Commanders') . innerHTML = content;
};

ReadCommanders ();

</script>

<h2><a href="doc/list_of_russian_submarines.html">List of Soviet and Russian Submarines</a></h2>




</body>

</html>
